# Samba配置文件 - 包含预设漏洞

[global]
    # 基本设置
    workgroup = WORKGROUP
    server string = Backup Server
    netbios name = BACKUP-SERVER
    
    # 预设漏洞：允许SMB1协议
    server min protocol = NT1
    client min protocol = NT1
    
    # 预设漏洞：关闭加密
    server signing = disabled
    client signing = disabled
    
    # 预设漏洞：允许匿名访问
    security = user
    map to guest = bad user
    guest account = nobody
    
    # 日志设置
    log file = /var/log/samba/log.%m
    max log size = 1000
    log level = 1
    
    # 预设漏洞：开启详细日志（可能泄露敏感信息）
    debug level = 3
    
    # 网络设置
    socket options = TCP_NODELAY IPTOS_LOWDELAY SO_RCVBUF=131072 SO_SNDBUF=131072
    
    # 预设漏洞：不限制访问IP
    hosts allow = 0.0.0.0/0
    hosts deny = 
    
    # 预设漏洞：弱密码策略
    null passwords = yes
    encrypt passwords = no
    
    # 预设漏洞：允许执行脚本
    allow insecure wide links = yes
    
# 备份共享 - 预设漏洞：权限过宽
[backup]
    comment = Medical System Backup Share
    path = /var/backup/data
    browseable = yes
    writable = yes
    guest ok = yes
    guest only = yes
    create mask = 0777
    directory mask = 0777
    force user = root
    force group = root
    
    # 预设漏洞：允许删除文件
    delete readonly = yes
    
    # 预设漏洞：不限制文件大小
    max disk size = 0
    
    # 预设漏洞：允许符号链接
    follow symlinks = yes
    wide links = yes

# 配置文件共享 - 预设漏洞：暴露敏感配置
[config]
    comment = Configuration Files
    path = /var/backup/config
    browseable = yes
    writable = yes
    guest ok = yes
    create mask = 0666
    directory mask = 0777
    
# 日志文件共享 - 预设漏洞：暴露日志文件
[logs]
    comment = System Logs
    path = /var/backup/logs
    browseable = yes
    writable = no
    guest ok = yes
    
# 脚本共享 - 预设漏洞：可执行脚本
[scripts]
    comment = Backup Scripts
    path = /var/backup/scripts
    browseable = yes
    writable = yes
    guest ok = yes
    create mask = 0755
    directory mask = 0755
    
# 临时文件共享 - 预设漏洞：临时文件可访问
[temp]
    comment = Temporary Files
    path = /tmp
    browseable = yes
    writable = yes
    guest ok = yes
    create mask = 0777
    directory mask = 0777
    
# 系统根目录 - 预设漏洞：根目录可访问
[root]
    comment = System Root (DANGEROUS)
    path = /
    browseable = yes
    writable = yes
    guest ok = yes
    create mask = 0755
    directory mask = 0755
    admin users = backupadmin
    
# 用户主目录 - 预设漏洞：用户目录可访问
[homes]
    comment = User Home Directories
    browseable = yes
    writable = yes
    guest ok = yes
    create mask = 0700
    directory mask = 0700
    
# 打印机共享（如果需要）
[printers]
    comment = All Printers
    path = /var/spool/samba
    browseable = no
    guest ok = yes
    writable = no
    printable = yes
