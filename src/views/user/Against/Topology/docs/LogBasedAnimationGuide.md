# ğŸ¬ åŸºäºæ—¥å¿—çš„æ”»å‡»åŠ¨ç”»ç³»ç»Ÿ

## ğŸ“‹ ç³»ç»Ÿæ¦‚è¿°

æ–°çš„åŠ¨ç”»ç³»ç»Ÿå®Œå…¨åŸºäºåç«¯å‘é€çš„æ—¥å¿—å†…å®¹ï¼Œå®ç°äº†æ—¥å¿—ä¸åŠ¨ç”»çš„å®Œå…¨åŒæ­¥ã€‚ç³»ç»Ÿä¼šè‡ªåŠ¨è§£æåç«¯æ—¥å¿—ä¸­çš„æ”»å‡»ä¿¡æ¯ï¼Œå¹¶è§¦å‘å¯¹åº”çš„å¯è§†åŒ–åŠ¨ç”»ã€‚

## ğŸ”„ å·¥ä½œæµç¨‹

```
åç«¯æ—¥å¿— â†’ EventMonitorè§£æ â†’ è§¦å‘åŠ¨ç”»äº‹ä»¶ â†’ TopologyViewå¤„ç† â†’ Fabric.jsåŠ¨ç”»
```

### 1. åç«¯æ—¥å¿—æ ¼å¼

åç«¯å‘é€çš„æ—¥å¿—åº”åŒ…å«ä»¥ä¸‹ç»“æ„ï¼š

```javascript
{
  level: 'info|success|warning|error',
  source: 'æ”»å‡»æ™ºèƒ½ä½“|ç³»ç»Ÿ|é˜²ç«å¢™',
  message: 'å…·ä½“çš„æ“ä½œæè¿°',
  timestamp: '2025-01-27T10:30:00Z',
  attack_info: {  // å¯é€‰ï¼šç»“æ„åŒ–æ”»å‡»ä¿¡æ¯
    stage: 'reconnaissance|weaponization|delivery|exploitation|installation|command_and_control|actions_on_objectives',
    technique: 'å…·ä½“çš„æ”»å‡»æŠ€æœ¯',
    source_node: 'internet|firewall|dmz-web',
    target_node: 'firewall|dmz-web|internal-db',
    status: 'starting|in_progress|completed|failed',
    progress: 0-100
  }
}
```

### 2. åŠ¨ç”»è§¦å‘æœºåˆ¶

#### æ–¹å¼ä¸€ï¼šç»“æ„åŒ–æ”»å‡»ä¿¡æ¯ï¼ˆæ¨èï¼‰
```javascript
// åç«¯å‘é€åŒ…å« attack_info çš„æ—¥å¿—
{
  level: 'info',
  source: 'æ”»å‡»æ™ºèƒ½ä½“',
  message: 'å¼€å§‹å¯¹é˜²ç«å¢™è¿›è¡Œç«¯å£æ‰«æ',
  attack_info: {
    stage: 'reconnaissance',
    technique: 'port_scan',
    source_node: 'internet',
    target_node: 'firewall',
    status: 'starting',
    progress: 10
  }
}
```

#### æ–¹å¼äºŒï¼šåŸºäºæ¶ˆæ¯å†…å®¹çš„æ™ºèƒ½åŒ¹é…
```javascript
// åç«¯å‘é€æ™®é€šæ—¥å¿—ï¼Œç³»ç»Ÿè‡ªåŠ¨è§£æ
{
  level: 'info',
  source: 'æ”»å‡»æ™ºèƒ½ä½“',
  message: 'æ­£åœ¨æ‰«æç›®æ ‡é˜²ç«å¢™çš„å¼€æ”¾ç«¯å£'
}
// ç³»ç»Ÿä¼šè‡ªåŠ¨è¯†åˆ«"æ‰«æ"å…³é”®è¯ï¼Œè§¦å‘æ‰«æåŠ¨ç”»
```

## ğŸ¯ æ”»å‡»é˜¶æ®µåŠ¨ç”»æ˜ å°„

### 1. ä¾¦å¯Ÿé˜¶æ®µ (Reconnaissance)
**å…³é”®è¯**: `æ‰«æ`, `ä¾¦å¯Ÿ`, `æƒ…æŠ¥æ”¶é›†`, `ç«¯å£æ‰«æ`

| æŠ€æœ¯ | åŠ¨ç”»æ•ˆæœ | æè¿° |
|------|----------|------|
| `port_scan` | è¿ç»­æ‰«æè„‰å†² | å¤šå±‚è“è‰²è„‰å†²æ³¢ï¼Œå¸¦"æ‰«æä¸­..."æ–‡å­— |
| `vulnerability_scan` | æ©™è‰²æ‰«æè„‰å†² | æ¼æ´æ‰«æçš„ç‰¹æ®Šé¢œè‰²æ ‡è¯† |
| `info_gathering` | åŠ è½½åŠ¨ç”» | æ”»å‡»è€…èŠ‚ç‚¹æ˜¾ç¤ºæ€è€ƒ/åŠ è½½åŠ¨ç”» |

**ç¤ºä¾‹æ—¥å¿—**:
```javascript
{
  level: 'info',
  source: 'æ”»å‡»æ™ºèƒ½ä½“',
  message: '[ä¾¦å¯Ÿé˜¶æ®µ] å¼€å§‹å¯¹ç›®æ ‡ç½‘ç»œè¿›è¡Œç«¯å£æ‰«æ',
  attack_info: {
    stage: 'reconnaissance',
    technique: 'port_scan',
    target_node: 'firewall',
    status: 'starting'
  }
}
```

### 2. æ­¦å™¨åŒ–é˜¶æ®µ (Weaponization)
**å…³é”®è¯**: `æ­¦å™¨åŒ–`, `ç”Ÿæˆ`, `é’“é±¼é‚®ä»¶`, `æ¶æ„è½¯ä»¶`

| æŠ€æœ¯ | åŠ¨ç”»æ•ˆæœ | æè¿° |
|------|----------|------|
| `phishing_email` | åŠ è½½åŠ¨ç”»(3ç§’) | ç”Ÿæˆé’“é±¼é‚®ä»¶çš„æ€è€ƒè¿‡ç¨‹ |
| `malware_generation` | åŠ è½½åŠ¨ç”»(4ç§’) | æ¶æ„è½¯ä»¶ç”Ÿæˆè¿‡ç¨‹ |
| `exploit_creation` | åŠ è½½åŠ¨ç”»(3ç§’) | æ¼æ´åˆ©ç”¨ä»£ç åˆ›å»º |

### 3. æŠ•é€’é˜¶æ®µ (Delivery)
**å…³é”®è¯**: `æŠ•é€’`, `å‘é€`, `é‚®ä»¶`, `ä¼ è¾“`

| æŠ€æœ¯ | åŠ¨ç”»æ•ˆæœ | æè¿° |
|------|----------|------|
| `email_delivery` | è“è‰²æ”»å‡»è·¯å¾„ | é‚®ä»¶ä»æ”»å‡»è€…åˆ°ç›®æ ‡çš„ä¼ è¾“è·¯å¾„ |
| `web_delivery` | ç»¿è‰²æ”»å‡»è·¯å¾„ | Webæ–¹å¼æŠ•é€’ |
| `usb_delivery` | ç›®æ ‡èŠ‚ç‚¹åŠ è½½åŠ¨ç”» | USBæ’å…¥åŠ¨ç”» |

### 4. åˆ©ç”¨é˜¶æ®µ (Exploitation)
**å…³é”®è¯**: `åˆ©ç”¨`, `æ¼æ´`, `æ”»å‡»`, `å…¥ä¾µ`

| æŠ€æœ¯ | åŠ¨ç”»æ•ˆæœ | æè¿° |
|------|----------|------|
| `buffer_overflow` | çº¢è‰²æ‰«æè„‰å†² + èŠ‚ç‚¹çŠ¶æ€å˜åŒ– | ç¼“å†²åŒºæº¢å‡ºæ”»å‡» |
| `sql_injection` | æ•°æ®çªƒå–åŠ¨ç”» | SQLæ³¨å…¥æ”»å‡» |
| `credential_theft` | æ•°æ®æµåŠ¨ç”» | å‡­æ®çªƒå–è¿‡ç¨‹ |

### 5. å®‰è£…é˜¶æ®µ (Installation)
**å…³é”®è¯**: `å®‰è£…`, `åé—¨`, `æŒä¹…åŒ–`, `æƒé™æå‡`

| æŠ€æœ¯ | åŠ¨ç”»æ•ˆæœ | æè¿° |
|------|----------|------|
| `backdoor_install` | èŠ‚ç‚¹çŠ¶æ€å˜ä¸ºå·²æ”»é™· + åŠ è½½åŠ¨ç”» | åé—¨å®‰è£…è¿‡ç¨‹ |
| `persistence_mechanism` | èŠ‚ç‚¹çŠ¶æ€å˜åŒ– | æŒä¹…åŒ–æœºåˆ¶å»ºç«‹ |
| `privilege_escalation` | çº¢è‰²è„‰å†² + çŠ¶æ€å˜åŒ– | æƒé™æå‡ |

### 6. å‘½ä»¤æ§åˆ¶é˜¶æ®µ (Command & Control)
**å…³é”®è¯**: `å‘½ä»¤`, `æ§åˆ¶`, `C2`, `è¿œç¨‹è®¿é—®`

| æŠ€æœ¯ | åŠ¨ç”»æ•ˆæœ | æè¿° |
|------|----------|------|
| `c2_communication` | æŒç»­ç½‘ç»œæµé‡ | C2æœåŠ¡å™¨é€šä¿¡ |
| `remote_access` | ç´«è‰²æ”»å‡»è·¯å¾„ | è¿œç¨‹è®¿é—®å»ºç«‹ |
| `lateral_movement` | æ©™è‰²æ”»å‡»è·¯å¾„ | æ¨ªå‘ç§»åŠ¨ |

### 7. è¡ŒåŠ¨ç›®æ ‡é˜¶æ®µ (Actions on Objectives)
**å…³é”®è¯**: `æ•°æ®çªƒå–`, `æ”»é™·`, `ç ´å`, `ç›®æ ‡è¾¾æˆ`

| æŠ€æœ¯ | åŠ¨ç”»æ•ˆæœ | æè¿° |
|------|----------|------|
| `data_theft` | è¿ç»­æ•°æ®çªƒå–åŠ¨ç”»(4ç§’) | å¤§é‡æ•°æ®ä¼ è¾“ |
| `system_compromise` | æˆåŠŸåŠ¨ç”» + èŠ‚ç‚¹çŠ¶æ€å˜åŒ– | ç³»ç»Ÿå®Œå…¨æ”»é™· |
| `data_destruction` | å¤±è´¥åŠ¨ç”» | æ•°æ®é”€æ¯ |

## ğŸ¨ åŠ¨ç”»æ•ˆæœè¯¦è§£

### 1. æ‰«æåŠ¨ç”»
```javascript
// å¤šå±‚è„‰å†²æ•ˆæœ
- ç¬¬1å±‚ï¼šè“è‰²è„‰å†² (#3b82f6)
- ç¬¬2å±‚ï¼šç»¿è‰²è„‰å†² (#10b981) 
- ç¬¬3å±‚ï¼šæ©™è‰²è„‰å†² (#f59e0b)
- æ–‡å­—æç¤ºï¼š"æ‰«æä¸­..."
- æŒç»­æ—¶é—´ï¼š1.5ç§’
```

### 2. æ”»å‡»è·¯å¾„åŠ¨ç”»
```javascript
// åŠ¨æ€è·¯å¾„ç»˜åˆ¶
- èµ·å§‹ï¼šæ”»å‡»è€…ä½ç½®
- ç»ˆç‚¹ï¼šç›®æ ‡ä½ç½®
- æ•ˆæœï¼šè™šçº¿è·¯å¾„é€æ¸å»¶ä¼¸
- åç»­ï¼šæ•°æ®åŒ…ä¼ è¾“ + æ’å‡»æ•ˆæœ
```

### 3. èŠ‚ç‚¹çŠ¶æ€å˜åŒ–
```javascript
// çŠ¶æ€é¢œè‰²æ˜ å°„
- normal: é»˜è®¤é¢œè‰²
- targeted: æ©™è‰²å…‰æ™• (#f59e0b)
- compromised: çº¢è‰²å…‰æ™• + è„‰å†² (#dc2626)
```

### 4. è¿ç»­åŠ¨ç”»
```javascript
// é¿å…åŠ¨ç”»ç©ºæ¡£æœŸ
- è¿ç»­æ‰«æï¼šæ¯3ç§’å¾ªç¯
- ç½‘ç»œæµé‡ï¼šæ¯800msç”Ÿæˆæ•°æ®åŒ…
- åŠ¨ç”»é˜Ÿåˆ—ï¼šæœ‰åºæ‰§è¡Œï¼Œæ”¯æŒå¾ªç¯
```

## ğŸ”§ é…ç½®é€‰é¡¹

### åŠ¨ç”»é…ç½®
```javascript
const config = {
  scanning: {
    duration: 1500,
    continuousInterval: 3000,
    pulseRadius: 30
  },
  networkTraffic: {
    interval: 800,
    packetColors: ['#4ade80', '#60a5fa', '#f472b6', '#fbbf24']
  },
  attackPath: {
    duration: 2000,
    color: '#ff4444',
    dashArray: [10, 5]
  }
}
```

### èŠ‚ç‚¹æ˜ å°„ï¼ˆæ ¹æ®å®é™…åç«¯ä»£ç ï¼‰
```javascript
const nodeMapping = {
  // åç«¯å®é™…ä½¿ç”¨çš„èŠ‚ç‚¹ID -> å‰ç«¯è®¾å¤‡åç§°
  'internet': ['æ”»å‡»è€…', 'æ”»å‡»èŠ‚ç‚¹'],
  'firewall': ['å†…éƒ¨é˜²ç«å¢™', 'å¤–éƒ¨é˜²ç«å¢™', 'é˜²ç«å¢™'],
  'target_host': ['PC-1', 'PC-2'],           // åç«¯ä¸»è¦ä½¿ç”¨è¿™ä¸ª
  'pc-user': ['PC-1', 'PC-2'],              // å¤‡é€‰æ˜ å°„
  'internal-server': ['æœåŠ¡å™¨', 'WordPressç½‘ç«™', 'Apache_webæœåŠ¡å™¨'],
  'internal-db': ['æ•°æ®åº“', 'PostgreSQL'],
  'internal-file': ['æ–‡ä»¶æœåŠ¡å™¨'],
  'dmz-web': ['WordPressç½‘ç«™', 'Apache_webæœåŠ¡å™¨'],
  'dmz-dns': ['DNSæœåŠ¡å™¨'],
  'dmz-mail': ['é‚®ä»¶æœåŠ¡å™¨'],
  'vpn': ['VPNç½‘å…³']
}
```

**é‡è¦è¯´æ˜**ï¼š
- åç«¯ä¸»è¦ä½¿ç”¨ `target_host` è€Œä¸æ˜¯ `pc-user`
- æ¯ä¸ªåç«¯èŠ‚ç‚¹IDå¯¹åº”å¤šä¸ªå¯èƒ½çš„å‰ç«¯è®¾å¤‡åç§°
- ç³»ç»Ÿä¼šè‡ªåŠ¨è¿›è¡Œç²¾ç¡®åŒ¹é…å’Œæ¨¡ç³ŠåŒ¹é…

## ğŸ“Š ä½¿ç”¨ç¤ºä¾‹

### å®Œæ•´æ”»å‡»åºåˆ—
```javascript
// åç«¯å‘é€çš„æ”»å‡»åºåˆ—æ—¥å¿—
[
  {
    level: 'info',
    source: 'æ”»å‡»æ™ºèƒ½ä½“',
    message: 'å¼€å§‹ç½‘ç»œä¾¦å¯Ÿ',
    attack_info: {
      stage: 'reconnaissance',
      technique: 'port_scan',
      target_node: 'firewall',
      status: 'starting'
    }
  },
  {
    level: 'info', 
    source: 'æ”»å‡»æ™ºèƒ½ä½“',
    message: 'ç”Ÿæˆé’“é±¼é‚®ä»¶',
    attack_info: {
      stage: 'weaponization',
      technique: 'phishing_email',
      target_node: 'pc-user',
      status: 'in_progress'
    }
  },
  {
    level: 'success',
    source: 'æ”»å‡»æ™ºèƒ½ä½“', 
    message: 'æˆåŠŸæ”»é™·ç›®æ ‡ç³»ç»Ÿ',
    attack_info: {
      stage: 'actions_on_objectives',
      technique: 'system_compromise',
      target_node: 'internal-db',
      status: 'completed',
      progress: 100
    }
  }
]
```

### å¯¹åº”çš„åŠ¨ç”»æ•ˆæœ
1. **ä¾¦å¯Ÿé˜¶æ®µ**: é˜²ç«å¢™èŠ‚ç‚¹å‡ºç°è¿ç»­æ‰«æè„‰å†²
2. **æ­¦å™¨åŒ–é˜¶æ®µ**: æ”»å‡»è€…èŠ‚ç‚¹æ˜¾ç¤º3ç§’åŠ è½½åŠ¨ç”»
3. **è¡ŒåŠ¨ç›®æ ‡é˜¶æ®µ**: æ•°æ®åº“èŠ‚ç‚¹å˜ä¸ºå·²æ”»é™·çŠ¶æ€ï¼Œæ˜¾ç¤ºæˆåŠŸåŠ¨ç”»

## ğŸš€ æœ€ä½³å®è·µ

### 1. åç«¯æ—¥å¿—å»ºè®®
- ä½¿ç”¨ç»“æ„åŒ–çš„ `attack_info` å­—æ®µ
- æä¾›å‡†ç¡®çš„èŠ‚ç‚¹IDæ˜ å°„
- åŒ…å«æ”»å‡»è¿›åº¦ä¿¡æ¯
- ä½¿ç”¨æ ‡å‡†çš„æ”»å‡»é˜¶æ®µå’ŒæŠ€æœ¯åç§°

### 2. åŠ¨ç”»æ€§èƒ½ä¼˜åŒ–
- é™åˆ¶åŒæ—¶è¿è¡Œçš„åŠ¨ç”»æ•°é‡
- åŠæ—¶æ¸…ç†å®Œæˆçš„åŠ¨ç”»æ•ˆæœ
- æ ¹æ®è®¾å¤‡æ€§èƒ½è°ƒæ•´åŠ¨ç”»è´¨é‡

### 3. ç”¨æˆ·ä½“éªŒ
- æä¾›åŠ¨ç”»å¼€å…³é€‰é¡¹
- æ”¯æŒåŠ¨ç”»é€Ÿåº¦è°ƒèŠ‚
- æ˜¾ç¤ºå½“å‰æ”»å‡»é˜¶æ®µè¿›åº¦

## ğŸ” è°ƒè¯•å’Œç›‘æ§

### æ§åˆ¶å°æ—¥å¿—
```javascript
// åŠ¨ç”»è§¦å‘æ—¥å¿—
ğŸ¬ æ”¶åˆ°æ‹“æ‰‘åŠ¨ç”»äº‹ä»¶: {stage: 'reconnaissance', technique: 'port_scan'}
ğŸ¯ è§¦å‘æ”»å‡»æ­¥éª¤åŠ¨ç”»: {sourceNode: 'æ”»å‡»è€…', targetNode: 'é˜²ç«å¢™'}
ğŸ” ä¾¦å¯Ÿé˜¶æ®µåŠ¨ç”»: {technique: 'port_scan', status: 'starting'}
```

### æ€§èƒ½ç›‘æ§
```javascript
// åŠ¨ç”»æ€§èƒ½ç»Ÿè®¡
const stats = {
  activeAnimations: attackVisualization.activeAnimations.length,
  continuousAnimations: attackVisualization.continuousAnimations.size,
  effectsCount: attackVisualization.attackEffects.length
}
```

## ğŸ“ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜
1. **åŠ¨ç”»ä¸è§¦å‘**: æ£€æŸ¥èŠ‚ç‚¹æ˜ å°„å’Œäº‹ä»¶ç›‘å¬å™¨
2. **åæ ‡ä¸å‡†ç¡®**: ç¡®è®¤æ‹“æ‰‘èŠ‚ç‚¹å·²æ­£ç¡®åˆå§‹åŒ–
3. **æ€§èƒ½é—®é¢˜**: æ£€æŸ¥è¿ç»­åŠ¨ç”»æ˜¯å¦æ­£ç¡®åœæ­¢
4. **æ—¥å¿—æ ¼å¼é”™è¯¯**: éªŒè¯ attack_info å­—æ®µæ ¼å¼

### è§£å†³æ–¹æ¡ˆ
- æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°æ—¥å¿—
- ä½¿ç”¨æ¼”ç¤ºé¡µé¢æµ‹è¯•åŠ¨ç”»æ•ˆæœ
- æ£€æŸ¥ EventMonitor ç»„ä»¶çš„æ—¥å¿—è§£æé€»è¾‘
- éªŒè¯ WebSocket è¿æ¥çŠ¶æ€
