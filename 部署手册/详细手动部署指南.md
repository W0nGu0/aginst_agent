# æ‰‹åŠ¨éƒ¨ç½²æŒ‡å—

æœ¬æ–‡æ¡£æä¾›è¯¦ç»†çš„æ‰‹åŠ¨éƒ¨ç½²æ­¥éª¤ï¼Œé€‚ç”¨äºéœ€è¦è‡ªå®šä¹‰é…ç½®æˆ–è‡ªåŠ¨åŒ–è„šæœ¬æ— æ³•æ»¡è¶³éœ€æ±‚çš„æƒ…å†µã€‚

## ğŸ“‹ éƒ¨ç½²å‰å‡†å¤‡

### 1. ç³»ç»Ÿè¦æ±‚æ£€æŸ¥

#### ç¡¬ä»¶è¦æ±‚
- CPU: 4æ ¸å¿ƒä»¥ä¸Š (æ¨è8æ ¸å¿ƒ)
- å†…å­˜: 8GBä»¥ä¸Š (æ¨è16GB)
- å­˜å‚¨: 50GBä»¥ä¸Šå¯ç”¨ç©ºé—´
- ç½‘ç»œ: ç¨³å®šçš„äº’è”ç½‘è¿æ¥

#### è½¯ä»¶è¦æ±‚
- æ“ä½œç³»ç»Ÿ: Windows 10/11, macOS 10.15+, Ubuntu 18.04+
- Docker: 20.10+
- Docker Compose: 2.0+
- Node.js: 18.0+ (LTSç‰ˆæœ¬)
- Python: 3.9+
- Git: 2.30+

### 2. ç¯å¢ƒéªŒè¯

```bash
# æ£€æŸ¥Docker
docker --version
docker-compose --version

# æ£€æŸ¥Node.jså’ŒNPM
node --version
npm --version

# æ£€æŸ¥Python
python --version  # Windows
python3 --version # Linux/macOS

# æ£€æŸ¥pip
pip --version   # Windows
pip3 --version  # Linux/macOS
```

## ğŸš€ è¯¦ç»†éƒ¨ç½²æ­¥éª¤

### æ­¥éª¤1: è·å–é¡¹ç›®ä»£ç 

```bash
# å…‹éš†é¡¹ç›® (å¦‚æœè¿˜æœªè·å–)
git clone <é¡¹ç›®ä»“åº“åœ°å€>
cd sec_agent

# æˆ–è€…è§£å‹é¡¹ç›®å‹ç¼©åŒ…
unzip sec_agent.zip
cd sec_agent
```

### æ­¥éª¤2: å®‰è£…å‰ç«¯ä¾èµ–

```bash
# å®‰è£…Node.jsä¾èµ–
npm install

# å¦‚æœå®‰è£…å¤±è´¥ï¼Œå°è¯•æ¸…é™¤ç¼“å­˜
npm cache clean --force
rm -rf node_modules package-lock.json  # Linux/macOS
# æˆ–è€…åœ¨Windowsä¸­åˆ é™¤node_modulesæ–‡ä»¶å¤¹å’Œpackage-lock.jsonæ–‡ä»¶
npm install
```

### æ­¥éª¤3: å®‰è£…Pythonä¾èµ–

#### 3.1 å®‰è£…å…¨å±€Pythonä¾èµ–

```bash
# Linux/macOS
pip3 install -r requirements.txt

# Windows
pip install -r requirements.txt

# å¦‚æœå®‰è£…å¤±è´¥ï¼Œä½¿ç”¨å›½å†…é•œåƒæº
pip3 install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple/
```

#### 3.2 å®‰è£…åç«¯ä¾èµ–

```bash
cd backend

# Linux/macOS
pip3 install -r requirements.txt

# Windows
pip install -r requirements.txt

cd ..
```

### æ­¥éª¤4: é…ç½®ç¯å¢ƒå˜é‡

#### 4.1 åˆ›å»ºAI Agenté…ç½®æ–‡ä»¶

åˆ›å»ºæ–‡ä»¶ `agents/scenario_agent/.env`:

```env
# DeepSeek APIé…ç½® (å¿…éœ€)
DEEPSEEK_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
DEEPSEEK_BASE_URL=https://api.deepseek.com
MODEL_NAME=deepseek-chat

# å¯é€‰é…ç½®
MAX_TOKENS=4000
TEMPERATURE=0.7
TIMEOUT=30
```

#### 4.2 åˆ›å»ºåç«¯é…ç½®æ–‡ä»¶ (å¯é€‰)

åˆ›å»ºæ–‡ä»¶ `backend/.env`:

```env
# è°ƒè¯•æ¨¡å¼
DEBUG=True
LOG_LEVEL=INFO

# CORSé…ç½®
CORS_ORIGINS=http://localhost:5173,http://localhost:3000,http://127.0.0.1:5173

# æ•°æ®åº“é…ç½® (å¦‚æœä½¿ç”¨)
DATABASE_URL=sqlite:///./app.db

# å®‰å…¨é…ç½®
SECRET_KEY=your-secret-key-here
```

#### 4.3 åˆ›å»ºDockerç¯å¢ƒé…ç½® (å¯é€‰)

åˆ›å»ºæ–‡ä»¶ `docker/.env`:

```env
# MySQLé…ç½®
MYSQL_ROOT_PASSWORD=rootpass
MYSQL_DATABASE=testdb
MYSQL_USER=testuser
MYSQL_PASSWORD=testpass

# å…¬å¸ä¿¡æ¯
COMPANY=ACME_CORP
```

### æ­¥éª¤5: æ„å»ºDockeré•œåƒ (å¯é€‰)

å¦‚æœéœ€è¦ä½¿ç”¨Dockerå®¹å™¨åŒ–çš„é¶åœºç¯å¢ƒï¼š

```bash
# è¿›å…¥Dockeré•œåƒç›®å½•
cd docker/images

# æ„å»ºåŸºç¡€é•œåƒ
docker build -t sec-agent/ubuntu ./ubuntu
docker build -t sec-agent/centos ./centos
docker build -t sec-agent/debian ./debian

# æ„å»ºå…¶ä»–ä¸“ç”¨é•œåƒ
docker build -t sec-agent/healthcare ./healthcare
docker build -t sec-agent/apt-targets ./apt-targets

cd ../..
```

### æ­¥éª¤6: å¯åŠ¨æœåŠ¡

#### 6.1 æ–¹å¼ä¸€ï¼šä½¿ç”¨å¯åŠ¨è„šæœ¬ (æ¨è)

```bash
# Linux/macOS
python3 start_all_services.py

# Windows
python start_all_services.py
```

#### 6.2 æ–¹å¼äºŒï¼šæ‰‹åŠ¨å¯åŠ¨å„ä¸ªæœåŠ¡

**ç»ˆç«¯1 - å¯åŠ¨åœºæ™¯æœåŠ¡:**
```bash
cd services/scenario_service
python3 main.py  # Linux/macOS
python main.py   # Windows
```

**ç»ˆç«¯2 - å¯åŠ¨åœºæ™¯æ™ºèƒ½ä½“:**
```bash
cd agents/scenario_agent
python3 main.py  # Linux/macOS
python main.py   # Windows
```

**ç»ˆç«¯3 - å¯åŠ¨åç«¯æœåŠ¡:**
```bash
cd backend
python3 main.py  # Linux/macOS
python main.py   # Windows
```

**ç»ˆç«¯4 - å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨:**
```bash
npm run dev
```

### æ­¥éª¤7: éªŒè¯éƒ¨ç½²

#### 7.1 æ£€æŸ¥æœåŠ¡çŠ¶æ€

è®¿é—®ä»¥ä¸‹åœ°å€ç¡®è®¤æœåŠ¡æ­£å¸¸è¿è¡Œï¼š

- å‰ç«¯ç•Œé¢: http://localhost:5173
- åç«¯APIæ–‡æ¡£: http://localhost:8080/docs
- åœºæ™¯æœåŠ¡: http://localhost:8002
- åœºæ™¯æ™ºèƒ½ä½“: http://localhost:8007

#### 7.2 è¿è¡Œæµ‹è¯•è„šæœ¬

```bash
# æµ‹è¯•å‰ç«¯å’Œåç«¯è¿æ¥
python3 test_phase2_frontend.py

# æµ‹è¯•åœºæ™¯æ™ºèƒ½ä½“å¥åº·çŠ¶æ€
python3 test_scenario_agent_health.py

# æµ‹è¯•åç«¯åˆ°æ™ºèƒ½ä½“çš„è¿æ¥
python3 test_backend_to_agent.py
```

## ğŸ”§ é«˜çº§é…ç½®

### è‡ªå®šä¹‰ç«¯å£é…ç½®

å¦‚æœé»˜è®¤ç«¯å£è¢«å ç”¨ï¼Œå¯ä»¥ä¿®æ”¹ä»¥ä¸‹é…ç½®ï¼š

#### å‰ç«¯ç«¯å£ (vite.config.js)
```javascript
export default defineConfig({
  server: {
    port: 3000, // ä¿®æ”¹ä¸ºå…¶ä»–ç«¯å£
    // ...
  }
})
```

#### åç«¯ç«¯å£ (backend/main.py)
```python
if __name__ == "__main__":
    uvicorn.run(app, host="0.0.0.0", port=8081)  # ä¿®æ”¹ç«¯å£
```

### æ•°æ®åº“é…ç½®

å¦‚æœéœ€è¦ä½¿ç”¨å¤–éƒ¨æ•°æ®åº“ï¼š

```env
# PostgreSQL
DATABASE_URL=postgresql://user:password@localhost:5432/dbname

# MySQL
DATABASE_URL=mysql://user:password@localhost:3306/dbname

# SQLite (é»˜è®¤)
DATABASE_URL=sqlite:///./app.db
```

### æ—¥å¿—é…ç½®

ä¿®æ”¹æ—¥å¿—çº§åˆ«å’Œè¾“å‡ºä½ç½®ï¼š

```python
# backend/main.py
import logging

logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    handlers=[
        logging.FileHandler('logs/app.log'),
        logging.StreamHandler()
    ]
)
```

## ğŸ³ Docker Composeéƒ¨ç½²

å¯¹äºç”Ÿäº§ç¯å¢ƒï¼Œæ¨èä½¿ç”¨Docker Composeï¼š

### 1. åˆ›å»ºdocker-compose.yml

```yaml
version: '3.8'

services:
  frontend:
    build:
      context: .
      dockerfile: Dockerfile.frontend
    ports:
      - "80:80"
    depends_on:
      - backend

  backend:
    build:
      context: ./backend
      dockerfile: Dockerfile
    ports:
      - "8080:8080"
    environment:
      - DEBUG=False
      - LOG_LEVEL=INFO
    volumes:
      - ./logs:/app/logs

  scenario_service:
    build:
      context: ./services/scenario_service
      dockerfile: Dockerfile
    ports:
      - "8002:8002"

  scenario_agent:
    build:
      context: ./agents/scenario_agent
      dockerfile: Dockerfile
    ports:
      - "8007:8007"
    environment:
      - DEEPSEEK_API_KEY=${DEEPSEEK_API_KEY}
```

### 2. å¯åŠ¨Docker Compose

```bash
# æ„å»ºå¹¶å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up --build

# åå°è¿è¡Œ
docker-compose up -d

# åœæ­¢æœåŠ¡
docker-compose down
```

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

#### 1. ç«¯å£è¢«å ç”¨
```bash
# æŸ¥çœ‹ç«¯å£å ç”¨æƒ…å†µ
netstat -tulpn | grep :8080  # Linux
netstat -ano | findstr :8080 # Windows

# æ€æ­»å ç”¨ç«¯å£çš„è¿›ç¨‹
kill -9 <PID>  # Linux
taskkill /PID <PID> /F  # Windows
```

#### 2. Pythonä¾èµ–å®‰è£…å¤±è´¥
```bash
# å‡çº§pip
pip install --upgrade pip

# ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ
python -m venv venv
source venv/bin/activate  # Linux/macOS
venv\Scripts\activate     # Windows

# é‡æ–°å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

#### 3. Node.jsä¾èµ–å®‰è£…å¤±è´¥
```bash
# æ¸…é™¤npmç¼“å­˜
npm cache clean --force

# åˆ é™¤node_modulesé‡æ–°å®‰è£…
rm -rf node_modules package-lock.json
npm install

# ä½¿ç”¨yarnæ›¿ä»£npm
npm install -g yarn
yarn install
```

#### 4. Dockerç›¸å…³é—®é¢˜
```bash
# æ£€æŸ¥DockerçŠ¶æ€
docker info

# é‡å¯DockeræœåŠ¡
sudo systemctl restart docker  # Linux
# æˆ–é‡å¯Docker Desktop (Windows/macOS)

# æ¸…ç†Dockerç¼“å­˜
docker system prune -a
```

## ğŸ“ éƒ¨ç½²æ£€æŸ¥æ¸…å•

- [ ] ç³»ç»Ÿè¦æ±‚æ»¡è¶³
- [ ] æ‰€æœ‰ä¾èµ–è½¯ä»¶å·²å®‰è£…
- [ ] é¡¹ç›®ä»£ç å·²è·å–
- [ ] å‰ç«¯ä¾èµ–å®‰è£…æˆåŠŸ
- [ ] Pythonä¾èµ–å®‰è£…æˆåŠŸ
- [ ] ç¯å¢ƒé…ç½®æ–‡ä»¶å·²åˆ›å»º
- [ ] DeepSeek APIå¯†é’¥å·²é…ç½®
- [ ] æ‰€æœ‰æœåŠ¡å¯åŠ¨æˆåŠŸ
- [ ] ç½‘é¡µç•Œé¢å¯æ­£å¸¸è®¿é—®
- [ ] æµ‹è¯•è„šæœ¬è¿è¡Œé€šè¿‡

å®Œæˆä»¥ä¸Šæ£€æŸ¥æ¸…å•åï¼Œæ‚¨çš„AI Agentæ”»é˜²æ¨æ¼”å¹³å°å°±éƒ¨ç½²æˆåŠŸäº†ï¼
