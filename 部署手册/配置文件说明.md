# é…ç½®æ–‡ä»¶è¯¦ç»†è¯´æ˜

æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜äº†AI Agentæ”»é˜²æ¨æ¼”å¹³å°çš„å„ç§é…ç½®æ–‡ä»¶å’Œé…ç½®é€‰é¡¹ã€‚

## ğŸ“ é…ç½®æ–‡ä»¶æ¦‚è§ˆ

| é…ç½®æ–‡ä»¶ | ä½ç½® | ç”¨é€” | å¿…éœ€æ€§ |
|----------|------|------|--------|
| `.env` | `agents/scenario_agent/` | AI Agenté…ç½® | å¿…éœ€ |
| `.env` | `backend/` | åç«¯æœåŠ¡é…ç½® | å¯é€‰ |
| `.env` | `docker/` | Dockerç¯å¢ƒé…ç½® | å¯é€‰ |
| `package.json` | é¡¹ç›®æ ¹ç›®å½• | å‰ç«¯ä¾èµ–é…ç½® | å¿…éœ€ |
| `requirements.txt` | é¡¹ç›®æ ¹ç›®å½• | Pythonå…¨å±€ä¾èµ– | å¿…éœ€ |
| `requirements.txt` | `backend/` | åç«¯Pythonä¾èµ– | å¿…éœ€ |
| `vite.config.js` | é¡¹ç›®æ ¹ç›®å½• | å‰ç«¯æ„å»ºé…ç½® | å¿…éœ€ |
| `tailwind.config.js` | é¡¹ç›®æ ¹ç›®å½• | æ ·å¼æ¡†æ¶é…ç½® | å¿…éœ€ |

## ğŸ¤– AI Agenté…ç½®

### agents/scenario_agent/.env

è¿™æ˜¯æœ€é‡è¦çš„é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«AIæ¨¡å‹çš„APIé…ç½®ã€‚

```env
# ===== å¿…éœ€é…ç½® =====

# DeepSeek APIå¯†é’¥ (å¿…éœ€)
DEEPSEEK_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# APIåŸºç¡€URL (å¿…éœ€)
DEEPSEEK_BASE_URL=https://api.deepseek.com

# æ¨¡å‹åç§° (å¿…éœ€)
MODEL_NAME=deepseek-chat

# ===== å¯é€‰é…ç½® =====

# æœ€å¤§tokenæ•°é‡ (é»˜è®¤: 4000)
MAX_TOKENS=4000

# æ¸©åº¦å‚æ•°ï¼Œæ§åˆ¶è¾“å‡ºéšæœºæ€§ (0.0-2.0ï¼Œé»˜è®¤: 0.7)
TEMPERATURE=0.7

# APIè¯·æ±‚è¶…æ—¶æ—¶é—´ï¼Œå•ä½ç§’ (é»˜è®¤: 30)
TIMEOUT=30

# é‡è¯•æ¬¡æ•° (é»˜è®¤: 3)
MAX_RETRIES=3

# é‡è¯•é—´éš”ï¼Œå•ä½ç§’ (é»˜è®¤: 1)
RETRY_DELAY=1

# æ˜¯å¦å¯ç”¨è°ƒè¯•æ¨¡å¼ (é»˜è®¤: False)
DEBUG_MODE=False

# æ—¥å¿—çº§åˆ« (DEBUG, INFO, WARNING, ERROR, é»˜è®¤: INFO)
LOG_LEVEL=INFO
```

### é…ç½®è¯´æ˜

#### DEEPSEEK_API_KEY
- **è¯´æ˜**: DeepSeekå¹³å°çš„APIå¯†é’¥
- **è·å–æ–¹å¼**: 
  1. è®¿é—® https://platform.deepseek.com/
  2. æ³¨å†Œè´¦å·å¹¶ç™»å½•
  3. åœ¨APIå¯†é’¥é¡µé¢ç”Ÿæˆæ–°çš„å¯†é’¥
- **æ ¼å¼**: `sk-` å¼€å¤´çš„å­—ç¬¦ä¸²
- **å®‰å…¨æç¤º**: è¯·å¦¥å–„ä¿ç®¡APIå¯†é’¥ï¼Œä¸è¦æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ

#### TEMPERATURE
- **è¯´æ˜**: æ§åˆ¶AIè¾“å‡ºçš„éšæœºæ€§å’Œåˆ›é€ æ€§
- **å–å€¼èŒƒå›´**: 0.0 - 2.0
- **æ¨èå€¼**:
  - 0.1-0.3: æ›´ç¡®å®šæ€§çš„è¾“å‡ºï¼Œé€‚åˆæŠ€æœ¯åˆ†æ
  - 0.7: å¹³è¡¡çš„è¾“å‡ºï¼Œé€‚åˆå¤§å¤šæ•°åœºæ™¯
  - 1.0-1.5: æ›´æœ‰åˆ›é€ æ€§çš„è¾“å‡ºï¼Œé€‚åˆåœºæ™¯ç”Ÿæˆ

#### MAX_TOKENS
- **è¯´æ˜**: å•æ¬¡APIè°ƒç”¨çš„æœ€å¤§tokenæ•°é‡
- **å½±å“**: å½±å“å“åº”é•¿åº¦å’ŒAPIè´¹ç”¨
- **æ¨èå€¼**:
  - 2000: ç®€çŸ­å›å¤
  - 4000: æ ‡å‡†å›å¤ (æ¨è)
  - 8000: è¯¦ç»†å›å¤

## ğŸ”§ åç«¯æœåŠ¡é…ç½®

### backend/.env

```env
# ===== åº”ç”¨é…ç½® =====

# è°ƒè¯•æ¨¡å¼ (å¼€å‘ç¯å¢ƒ: True, ç”Ÿäº§ç¯å¢ƒ: False)
DEBUG=True

# æ—¥å¿—çº§åˆ«
LOG_LEVEL=INFO

# åº”ç”¨ç«¯å£ (é»˜è®¤: 8080)
PORT=8080

# åº”ç”¨ä¸»æœº (é»˜è®¤: 0.0.0.0)
HOST=0.0.0.0

# ===== å®‰å…¨é…ç½® =====

# JWTå¯†é’¥ (ç”Ÿäº§ç¯å¢ƒå¿…é¡»ä¿®æ”¹)
SECRET_KEY=your-secret-key-here

# JWTè¿‡æœŸæ—¶é—´ï¼Œå•ä½ç§’ (é»˜è®¤: 3600)
JWT_EXPIRATION=3600

# ===== CORSé…ç½® =====

# å…è®¸çš„æºåœ°å€
CORS_ORIGINS=http://localhost:5173,http://localhost:3000,http://127.0.0.1:5173

# æ˜¯å¦å…è®¸å‡­è¯
CORS_ALLOW_CREDENTIALS=True

# ===== æ•°æ®åº“é…ç½® =====

# æ•°æ®åº“URL (SQLiteç¤ºä¾‹)
DATABASE_URL=sqlite:///./app.db

# æ•°æ®åº“è¿æ¥æ± å¤§å°
DB_POOL_SIZE=10

# æ•°æ®åº“è¿æ¥è¶…æ—¶æ—¶é—´
DB_TIMEOUT=30

# ===== APIé…ç½® =====

# APIç‰ˆæœ¬å‰ç¼€
API_PREFIX=/api/v1

# APIè¯·æ±‚é™åˆ¶ (æ¯åˆ†é’Ÿè¯·æ±‚æ•°)
RATE_LIMIT=100

# ===== æ–‡ä»¶ä¸Šä¼ é…ç½® =====

# æœ€å¤§æ–‡ä»¶å¤§å°ï¼Œå•ä½MB
MAX_FILE_SIZE=10

# å…è®¸çš„æ–‡ä»¶ç±»å‹
ALLOWED_FILE_TYPES=.txt,.json,.csv,.log

# æ–‡ä»¶å­˜å‚¨è·¯å¾„
UPLOAD_PATH=./uploads
```

## ğŸ³ Dockeré…ç½®

### docker/.env

```env
# ===== MySQLé…ç½® =====
MYSQL_ROOT_PASSWORD=rootpass
MYSQL_DATABASE=testdb
MYSQL_USER=testuser
MYSQL_PASSWORD=testpass

# ===== PostgreSQLé…ç½® =====
POSTGRES_DB=sec_agent
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres

# ===== Redisé…ç½® =====
REDIS_PASSWORD=redis_pass

# ===== å…¬å¸ä¿¡æ¯é…ç½® =====
COMPANY=ACME_CORP
DEPARTMENT=IT_SECURITY

# ===== ç½‘ç»œé…ç½® =====
FRONTEND_NET=172.20.0.0/24
BACKEND_NET=172.21.0.0/24
SERVER_SEGMENT=192.168.200.0/24
DB_SEGMENT=192.168.214.0/24

# ===== å®¹å™¨èµ„æºé™åˆ¶ =====
MEMORY_LIMIT=512m
CPU_LIMIT=0.5
```

## ğŸŒ å‰ç«¯é…ç½®

### vite.config.js

```javascript
import { fileURLToPath, URL } from "node:url";
import { defineConfig } from "vite";
import vue from "@vitejs/plugin-vue";
import vueDevTools from "vite-plugin-vue-devtools";

export default defineConfig({
  plugins: [vue(), vueDevTools()],
  
  resolve: {
    alias: {
      "@": fileURLToPath(new URL("./src", import.meta.url)),
    },
  },
  
  server: {
    // å¼€å‘æœåŠ¡å™¨ç«¯å£
    port: 5173,
    
    // å¼€å‘æœåŠ¡å™¨ä¸»æœº
    host: '0.0.0.0',
    
    // æ˜¯å¦è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨
    open: true,
    
    // ä»£ç†é…ç½®
    proxy: {
      "/api": {
        target: "http://localhost:8080",
        changeOrigin: true,
        // rewrite: (path) => path.replace(/^\/api/, '/api')
      },
      "/ws": {
        target: "ws://localhost:8080",
        ws: true,
        changeOrigin: true,
      },
    },
  },
  
  build: {
    // æ„å»ºè¾“å‡ºç›®å½•
    outDir: 'dist',
    
    // æ˜¯å¦ç”Ÿæˆsource map
    sourcemap: false,
    
    // æ„å»ºæ—¶æ˜¯å¦å‹ç¼©
    minify: 'terser',
    
    // chunkå¤§å°è­¦å‘Šé™åˆ¶
    chunkSizeWarningLimit: 1000,
  },
});
```

### tailwind.config.js

```javascript
/** @type {import('tailwindcss').Config} */
export default {
  content: [
    "./index.html",
    "./src/**/*.{vue,js,ts,jsx,tsx}",
  ],
  theme: {
    extend: {
      colors: {
        // è‡ªå®šä¹‰é¢œè‰²
        primary: '#1e40af',
        secondary: '#64748b',
        accent: '#f59e0b',
        danger: '#ef4444',
        success: '#10b981',
        warning: '#f59e0b',
      },
      fontFamily: {
        // è‡ªå®šä¹‰å­—ä½“
        sans: ['Inter', 'sans-serif'],
        mono: ['JetBrains Mono', 'monospace'],
      },
    },
  },
  plugins: [
    require('daisyui'),
  ],
  
  // DaisyUIé…ç½®
  daisyui: {
    themes: [
      "light",
      "dark",
      "cyberpunk",
      {
        security: {
          "primary": "#1e40af",
          "secondary": "#64748b",
          "accent": "#f59e0b",
          "neutral": "#374151",
          "base-100": "#ffffff",
          "info": "#3abff8",
          "success": "#36d399",
          "warning": "#fbbd23",
          "error": "#f87272",
        },
      },
    ],
    darkTheme: "dark",
    base: true,
    styled: true,
    utils: true,
    rtl: false,
    prefix: "",
    logs: true,
  },
}
```

## ğŸ“Š æœåŠ¡ç«¯å£é…ç½®

### é»˜è®¤ç«¯å£åˆ†é…

| æœåŠ¡ | é»˜è®¤ç«¯å£ | é…ç½®æ–‡ä»¶ | ä¿®æ”¹æ–¹æ³• |
|------|----------|----------|----------|
| å‰ç«¯å¼€å‘æœåŠ¡å™¨ | 5173 | `vite.config.js` | ä¿®æ”¹ `server.port` |
| åç«¯API | 8080 | `backend/.env` | è®¾ç½® `PORT` ç¯å¢ƒå˜é‡ |
| åœºæ™¯æœåŠ¡ | 8002 | `services/scenario_service/main.py` | ä¿®æ”¹ä»£ç ä¸­çš„ç«¯å£ |
| åœºæ™¯æ™ºèƒ½ä½“ | 8007 | `agents/scenario_agent/main.py` | ä¿®æ”¹ä»£ç ä¸­çš„ç«¯å£ |
| æ”»å‡»æœåŠ¡ | 8003 | `services/attack_service/main.py` | ä¿®æ”¹ä»£ç ä¸­çš„ç«¯å£ |
| é˜²å¾¡æœåŠ¡ | 8004 | `services/defense_service/main.py` | ä¿®æ”¹ä»£ç ä¸­çš„ç«¯å£ |
| è¯„ä¼°æœåŠ¡ | 8005 | `services/evaluate_service/main.py` | ä¿®æ”¹ä»£ç ä¸­çš„ç«¯å£ |

### ç«¯å£å†²çªè§£å†³

å¦‚æœé‡åˆ°ç«¯å£å†²çªï¼Œå¯ä»¥æŒ‰ä»¥ä¸‹æ­¥éª¤è§£å†³ï¼š

1. **æŸ¥çœ‹ç«¯å£å ç”¨**:
```bash
# Linux/macOS
netstat -tulpn | grep :8080
lsof -i :8080

# Windows
netstat -ano | findstr :8080
```

2. **ä¿®æ”¹é…ç½®æ–‡ä»¶**:
```env
# backend/.env
PORT=8081
```

3. **æ›´æ–°ä»£ç†é…ç½®**:
```javascript
// vite.config.js
proxy: {
  "/api": {
    target: "http://localhost:8081", // æ›´æ–°ä¸ºæ–°ç«¯å£
    changeOrigin: true,
  },
}
```

## ğŸ” å®‰å…¨é…ç½®å»ºè®®

### ç”Ÿäº§ç¯å¢ƒé…ç½®

```env
# backend/.env (ç”Ÿäº§ç¯å¢ƒ)
DEBUG=False
LOG_LEVEL=WARNING
SECRET_KEY=your-very-secure-secret-key-here
CORS_ORIGINS=https://yourdomain.com
DATABASE_URL=postgresql://user:password@localhost:5432/sec_agent
```

### APIå¯†é’¥å®‰å…¨

1. **ä¸è¦åœ¨ä»£ç ä¸­ç¡¬ç¼–ç APIå¯†é’¥**
2. **ä½¿ç”¨ç¯å¢ƒå˜é‡å­˜å‚¨æ•æ„Ÿä¿¡æ¯**
3. **å®šæœŸè½®æ¢APIå¯†é’¥**
4. **é™åˆ¶APIå¯†é’¥çš„æƒé™èŒƒå›´**
5. **ç›‘æ§APIä½¿ç”¨æƒ…å†µ**

### ç½‘ç»œå®‰å…¨

```env
# é™åˆ¶è®¿é—®æº
CORS_ORIGINS=https://yourdomain.com,https://admin.yourdomain.com

# å¯ç”¨HTTPS
FORCE_HTTPS=True

# è®¾ç½®å®‰å…¨å¤´
SECURITY_HEADERS=True
```

## ğŸ”§ æ€§èƒ½ä¼˜åŒ–é…ç½®

### æ•°æ®åº“è¿æ¥æ± 

```env
# æ•°æ®åº“è¿æ¥æ± é…ç½®
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=30
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600
```

### ç¼“å­˜é…ç½®

```env
# Redisç¼“å­˜é…ç½®
REDIS_URL=redis://localhost:6379/0
CACHE_TTL=3600
CACHE_MAX_SIZE=1000
```

### æ—¥å¿—é…ç½®

```env
# æ—¥å¿—é…ç½®
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=/var/log/sec_agent/app.log
LOG_MAX_SIZE=100MB
LOG_BACKUP_COUNT=5
```

è¿™äº›é…ç½®é€‰é¡¹å¯ä»¥æ ¹æ®æ‚¨çš„å…·ä½“éœ€æ±‚è¿›è¡Œè°ƒæ•´ã€‚å»ºè®®åœ¨å¼€å‘ç¯å¢ƒä¸­ä½¿ç”¨é»˜è®¤é…ç½®ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­æ ¹æ®å®é™…æƒ…å†µè¿›è¡Œä¼˜åŒ–ã€‚
